{% extends "base.html" %}
{% block title %}Forgot Password - Webhooker{% endblock %}
{% block body %}
<main class="auth-container">
    <div class="uk-card uk-card-default">
        <div class="uk-card-header uk-text-center">
            <h2>Forgot Password</h2>
        </div>
        <div class="uk-card-body">
            {% if let Some(msg) = message %}
            <div class="uk-alert uk-alert-success" uk-alert>{{ msg }}</div>
            {% endif %}
            <form id="forgot-form" class="uk-form-stacked">
                <div class="uk-margin">
                    <label class="uk-form-label" for="email">Email</label>
                    <input class="uk-input" type="email" id="email" name="email" required autofocus>
                </div>
                <button class="uk-button uk-button-primary uk-width-1-1" type="submit">Send Reset Link</button>
            </form>
            <p class="uk-text-center uk-margin-top">
                <a href="/auth/login">Back to login</a>
            </p>
        </div>
    </div>
</main>
<script>
document.getElementById('forgot-form').addEventListener('submit', async (e) => {
    e.preventDefault();
    await fetch('/api/v1/auth/forgot-password', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({ email: e.target.email.value })
    });
    alert('If that email is registered, a reset link has been sent.');
});
</script>
{% endblock %}
